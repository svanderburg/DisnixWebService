<?xml version="1.0" encoding="UTF-8"?>
<!-- lifted from man+troff by doclifter -->
<refentry xmlns='http://docbook.org/ns/docbook' version='5.0' xml:lang='en' xml:id='sec-disnix-soap-client'>
<!-- DO NOT MODIFY THIS FILE!  It was generated by help2man 1.47.16. -->
<refmeta>
<refentrytitle>disnix-soap-client</refentrytitle>
<manvolnum>1</manvolnum>
<refmiscinfo class='source'>January 1980</refmiscinfo>
<refmiscinfo class='manual'>disnix-soap-client (DisnixWebService 0.10.1)</refmiscinfo>
</refmeta>
<refnamediv>
<refname>disnix-soap-client</refname>
<refpurpose>Provides access to the disnix-service through the SOAP protocol</refpurpose>
</refnamediv>
<!-- body begins here -->
<refsynopsisdiv xml:id='synopsis'>
<cmdsynopsis>
  <command>disnix-soap-client</command>    
    <arg choice='plain'>--target <replaceable>targetEPR</replaceable></arg>
    <arg choice='plain'><replaceable>operation</replaceable></arg>
    <arg choice='opt'><replaceable>OPTION</replaceable></arg>
    <arg choice='plain'><replaceable>paths</replaceable></arg>
</cmdsynopsis>
</refsynopsisdiv>


<refsect1 xml:id='description'><title>DESCRIPTION</title>
<para>The command `disnix-soap-client' provides remote access to a `disnix-service'
instance running on a machine in the network by using a SOAP/HTTP connection.
This allows the user to perform remote deployment operations on a target machine
through SOAP.</para>

<para>In most cases this command is not used directly, but is used by specifying the
<emphasis role='strong' remap='B'>--interface</emphasis> option for a Disnix command-line utility (such as `disnix-env') or
by setting the `DISNIX_CLIENT_INTERFACE' environment variable. By using one of
those properties, the Disnix tools will use the given interface instead of the
standard `disnix-client' which only provides loopback access.</para>
</refsect1>

<refsect1 xml:id='options'><title>OPTIONS</title>
<para>Operations:</para>

<refsect2 xml:id='operations'><title>Operations:</title>
<variablelist remap='TP'>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>--import</emphasis></term>
  <listitem>
<para>Imports a given closure into the Nix store of the
target machine. Optionally, transfers the closure
from this machine to the target machine</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>--export</emphasis></term>
  <listitem>
<para>Exports the closure of a given Nix store path of
the target machine into a file, and optionally
downloads it</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>--print-invalid</emphasis></term>
  <listitem>
<para>Prints all the paths that are not valid in the Nix
store of the target machine</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>-r</emphasis>, <emphasis role='strong' remap='B'>--realise</emphasis></term>
  <listitem>
<para>Realises the given store derivation on the target
machine</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>--set</emphasis></term>
  <listitem>
<para>Creates a Disnix profile only containing the given
derivation on the target machine</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>-q</emphasis>, <emphasis role='strong' remap='B'>--query-installed</emphasis></term>
  <listitem>
<para>Queries all the installed services on the given
target machine</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>--query-requisites</emphasis></term>
  <listitem>
<para>Queries all the requisites (intra-dependencies) of
the given services on the target machine</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>--collect-garbage</emphasis></term>
  <listitem>
<para>Collects garbage on the given target machine</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>--activate</emphasis></term>
  <listitem>
<para>Activates the given service on the target machine</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>--deactivate</emphasis></term>
  <listitem>
<para>Deactivates the given service on the target machine</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>--lock</emphasis></term>
  <listitem>
<para>Acquires a lock on a Disnix profile of the target
machine</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>--unlock</emphasis></term>
  <listitem>
<para>Release the lock on a Disnix profile of the target
machine</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>--snapshot</emphasis></term>
  <listitem>
<para>Snapshots the logical state of a component on the
given target machine</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>--restore</emphasis></term>
  <listitem>
<para>Restores the logical state of a component on the
given target machine</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>--delete-state</emphasis></term>
  <listitem>
<para>Deletes the state of a component on the given
machine</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>--query-all-snapshots</emphasis></term>
  <listitem>
<para>Queries all available snapshots of a component on
the given target machine</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>--query-latest-snapshot</emphasis></term>
  <listitem>
<para>Queries the latest snapshot of a component on the
given target machine</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>--print-missing-snapshots</emphasis></term>
  <listitem>
<para>Prints the paths of all snapshots not present on
the given target machine</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>--import-snapshots</emphasis></term>
  <listitem>
<para>Imports the specified snapshots into the remote
snapshot store</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>--export-snapshots</emphasis></term>
  <listitem>
<para>Exports the specified snapshot to the local
snapshot store</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>--resolve-snapshots</emphasis></term>
  <listitem>
<para>Converts the relative paths to the snapshots to
absolute paths</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>--clean-snapshots</emphasis></term>
  <listitem>
<para>Removes older snapshots from the snapshot store</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>--capture-config</emphasis></term>
  <listitem>
<para>Captures the configuration of the machine from the
Dysnomia container properties in a Nix expression</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>--shell</emphasis></term>
  <listitem>
<para>Spawns a Dysnomia shell to run arbitrary
maintenance tasks</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>--help</emphasis></term>
  <listitem>
<para>Shows the usage of this command to the user</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>--version</emphasis></term>
  <listitem>
<para>Shows the version of this command to the user</para>
  </listitem>
  </varlistentry>
</variablelist>
</refsect2>

<refsect2 xml:id='general_options'><title>General options:</title>
<variablelist remap='TP'>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>-t</emphasis>, <emphasis role='strong' remap='B'>--target</emphasis>=<emphasis remap='I'>TARGET</emphasis></term>
  <listitem>
<para>Specifies the hostname and optional port number of
the SSH server used to connect to the target
machine</para>
  </listitem>
  </varlistentry>
</variablelist>
</refsect2>

<refsect2 xml:id='importexportimport_snapshotsexport_snaps'><title>Import/Export/Import snapshots/Export snapshots/Shell options:</title>
<variablelist remap='TP'>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>--localfile</emphasis></term>
  <listitem>
<para>Specifies that the given paths are stored locally
and must be transferred to the remote machine if
needed</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>--remotefile</emphasis></term>
  <listitem>
<para>Specifies that the given paths are stored remotely
and must transferred from the remote machine if
needed</para>
  </listitem>
  </varlistentry>
</variablelist>
</refsect2>

<refsect2 xml:id='shell_options'><title>Shell options:</title>
<variablelist remap='TP'>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>--command</emphasis>=<emphasis remap='I'>COMMAND</emphasis></term>
  <listitem>
<para>Commands to execute in the shell session</para>
  </listitem>
  </varlistentry>
</variablelist>
</refsect2>

<refsect2 xml:id='setquery_installedlockunlock_options'><title>Set/Query installed/Lock/Unlock options:</title>
<variablelist remap='TP'>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>-p</emphasis>, <emphasis role='strong' remap='B'>--profile</emphasis>=<emphasis remap='I'>PROFILE</emphasis></term>
  <listitem>
<para>Name of the Disnix profile. Defaults to: default</para>
  </listitem>
  </varlistentry>
</variablelist>
</refsect2>

<refsect2 xml:id='collect_garbage_options'><title>Collect garbage options:</title>
<variablelist remap='TP'>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>-d</emphasis>, <emphasis role='strong' remap='B'>--delete-old</emphasis></term>
  <listitem>
<para>Indicates whether all older generations of Nix
profiles must be removed as well</para>
  </listitem>
  </varlistentry>
</variablelist>
</refsect2>

<refsect2 xml:id='activationdeactivationsnapshotrestoredel'><title>Activation/Deactivation/Snapshot/Restore/Delete state options:</title>
<variablelist remap='TP'>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>--type</emphasis>=<emphasis remap='I'>TYPE</emphasis></term>
  <listitem>
<para>Specifies the activation module that should be
used, such as echo or process.</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>--arguments</emphasis>=<emphasis remap='I'>ARGUMENTS</emphasis></term>
  <listitem>
<para>Specifies the arguments passed to the Dysnomia
module, which is a string with key=value pairs</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>--container</emphasis>=<emphasis remap='I'>CONTAINER</emphasis></term>
  <listitem>
<para>Name of the container in which the component is
managed. If omitted it will default to the same
value as the type.</para>
  </listitem>
  </varlistentry>
</variablelist>
</refsect2>

<refsect2 xml:id='query_all_snapshotsquery_latest_snapshot'><title>Query all snapshots/Query latest snapshot options:</title>
<variablelist remap='TP'>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>-C</emphasis>, <emphasis role='strong' remap='B'>--container</emphasis>=<emphasis remap='I'>CONTAINER</emphasis></term>
  <listitem>
<para>Name of the container in which the component is managed</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>-c</emphasis>, <emphasis role='strong' remap='B'>--component</emphasis>=<emphasis remap='I'>COMPONENT</emphasis></term>
  <listitem>
<para>Name of the component hosted in a container</para>
  </listitem>
  </varlistentry>
</variablelist>
</refsect2>

<refsect2 xml:id='clean_snapshots_options'><title>Clean snapshots options:</title>
<variablelist remap='TP'>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>--keep</emphasis>=<emphasis remap='I'>NUM</emphasis></term>
  <listitem>
<para>Amount of snapshot generations to keep. Defaults
to: 1</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>-C</emphasis>, <emphasis role='strong' remap='B'>--container</emphasis>=<emphasis remap='I'>CONTAINER</emphasis></term>
  <listitem>
<para>Name of the container to filter on</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term><emphasis role='strong' remap='B'>-c</emphasis>, <emphasis role='strong' remap='B'>--component</emphasis>=<emphasis remap='I'>COMPONENT</emphasis></term>
  <listitem>
<para>Name of the component to filter on</para>
  </listitem>
  </varlistentry>
</variablelist>
</refsect2>
</refsect1>

<refsect1 xml:id='environment'><title>ENVIRONMENT</title>
<variablelist remap='TP'>
  <varlistentry>
  <term>DISNIX_PROFILE</term>
  <listitem>
<para>Sets the name of the profile that stores the
manifest on the coordinator machine and the
deployed services per machine on each target
(Defaults to: default)</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term>DYSNOMIA_STATEDIR</term>
  <listitem>
<para>Specifies where the snapshots must be stored on the
coordinator machine (defaults to: <filename>/var/dysnomia</filename>)</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term>DISNIX_SOAP_CLIENT_USERNAME Specifies the username to use for HTTP basic</term>
  <listitem>
<para>authentication</para>
  </listitem>
  </varlistentry>
  <varlistentry>
  <term>DISNIX_SOAP_CLIENT_PASSWORD Specifies the password to use for HTTP basic</term>
  <listitem>
<para>authentication</para>
  </listitem>
  </varlistentry>
</variablelist>
</refsect1>

<refsect1 xml:id='copyright'><title>COPYRIGHT</title>
<para>Copyright (C) 2008-2021 Sander van der Burg</para>
</refsect1>
</refentry>

